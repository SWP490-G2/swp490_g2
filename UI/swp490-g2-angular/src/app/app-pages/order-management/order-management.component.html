<div class="card">
  <p-table [value]="orderProduct" [tableStyle]="{'min-width': '60rem'}">
    <ng-template pTemplate="caption">
      <div class="flex align-items-center justify-content-between">
        Orders
        <p-button icon="pi pi-refresh"></p-button>
      </div>
    </ng-template>
    <ng-template pTemplate="header">
      <tr>
        <th>Buyer Name</th>
        <th>Email</th>
        <th>Phone number</th>
        <th>Total Order</th>
        <th>Total Price</th>
        <th>Order Status</th>
        <th>Action</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-order>
      <tr>
        <td>{{order.orderCreator.middleName + ' '+ order.orderCreator.lastName}}</td>
        <td>{{order.orderCreator.email}}</td>
        <td>{{order.orderCreator.phoneNumber}}</td>
        <td>{{order.orderProductDetails.length}}</td>
        <td>{{order.totalPrice | currency: 'VND'}}</td>
        <td><p-tag [value]="order.orderStatus" [severity]="getSeverity(order.orderStatus)"></p-tag></td>
        <td><p-button (click)="showDialog(order.id)" icon="pi pi-external-link" label="View detail"></p-button></td>
      </tr>
    </ng-template>
    <ng-template pTemplate="summary">
      <div class="flex align-items-center justify-content-between">
        In total there are {{orderProductDetail ? orderProductDetail.length : 0 }} buyers order.
      </div>
    </ng-template>
  </p-table>
</div>

<p-dialog header="Orders detail" [(visible)]="visible" [modal]="true" [style]="{ width: '50vw' }" [draggable]="false"
  [resizable]="false">
  <div class="flex gap-4">
    <ng-container *ngFor="let orderDetail of detailOrder">
      <p-card [header]="orderDetail.product.productName" [subheader]="orderDetail.price + ' VND'"
        [style]="{ width: '360px' }">
        <ng-template pTemplate="header">
          <img alt="Card" src="https://primefaces.org/cdn/primeng/images/usercard.png" />
        </ng-template>
        <p>
          Quantity: {{orderDetail.quantity}}
        </p>
      </p-card>
    </ng-container>
  </div>
  <div class="mt-6">
    <p-button label="Delivery" icon="pi pi-check" (click)="handleAcceptOrder()"></p-button>
    <p-button label="Abort" icon="pi pi-times" styleClass="p-button-danger" [style]="{ 'margin-left': '.5em' }"
      (click)="handleAbortOrder()"></p-button>
  </div>
</p-dialog>