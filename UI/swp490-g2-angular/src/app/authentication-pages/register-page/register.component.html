<p-toast></p-toast>
<div class="register-container">
  <!-- #form is a viewChild in Angular -->
  <form
    #form="ngForm"
    class="surface-card p-4 shadow-2 border-round w-full lg:w-6"
    (ngSubmit)="register()"
  >
    <div class="text-center mb-5">
      <div class="text-900 text-3xl font-medium mb-3">
        Register a new account
      </div>
    </div>

    <div>
      <label for="email" class="block text-900 font-medium my-2">Email*</label>
      <input
        id="email"
        type="text"
        pInputText
        class="w-full"
        name="email"
        ngModel
      />
      <div
        class="flex align-items-center gap-1"
        *ngIf="form.controls['email']?.errors"
      >
        <i class="pi pi-times-circle text-danger"></i>
        <small class="text-danger"> Enter a valid email address! </small>
      </div>

      <label for="password" class="block text-900 font-medium my-2"
        >Password*</label
      >
      <input
        id="password"
        type="password"
        pInputText
        class="w-full"
        name="password"
        ngModel
      />

      <!-- {{ form.controls["password"].errors | json }} -->
      <div class="flex align-items-center gap-1">
        <i
          [ngClass]="
            validatePasswordStyle('minlength') ||
            validatePasswordStyle('maxlength')
              ? 'pi pi-times-circle text-danger'
              : 'pi pi-check-circle text-success'
          "
        ></i>
        <small
          [ngClass]="
            validatePasswordStyle('minlength') ||
            validatePasswordStyle('maxlength')
              ? 'text-danger'
              : 'text-success'
          "
        >
          The password must have <strong>8 - 25 characters</strong>
        </small>
      </div>

      <div class="flex align-items-center gap-1">
        <i
          [ngClass]="
            validatePasswordStyle('hasNumber')
              ? 'pi pi-times-circle text-danger'
              : 'pi pi-check-circle text-success'
          "
        ></i>
        <small
          [ngClass]="
            validatePasswordStyle('hasNumber') ? 'text-danger' : 'text-success'
          "
        >
          The password must have at least <strong>a number</strong>
        </small>
      </div>

      <div class="flex align-items-center gap-1">
        <i
          [ngClass]="
            validatePasswordStyle('hasCapitalCase')
              ? 'pi pi-times-circle text-danger'
              : 'pi pi-check-circle text-success'
          "
        ></i>
        <small
          [ngClass]="
            validatePasswordStyle('hasCapitalCase')
              ? 'text-danger'
              : 'text-success'
          "
        >
          The password must have at least <strong>an uppercase letter</strong>
        </small>
      </div>

      <div class="flex align-items-center gap-1">
        <i
          [ngClass]="
            validatePasswordStyle('hasSmallCase')
              ? 'pi pi-times-circle text-danger'
              : 'pi pi-check-circle text-success'
          "
        ></i>
        <small
          [ngClass]="
            validatePasswordStyle('hasSmallCase')
              ? 'text-danger'
              : 'text-success'
          "
        >
          The password must have at least <strong>a lowercase letter</strong>
        </small>
      </div>

      <div class="flex align-items-center gap-1">
        <i
          [ngClass]="
            validatePasswordStyle('hasSpecialCharacters')
              ? 'pi pi-times-circle text-danger'
              : 'pi pi-check-circle text-success'
          "
        ></i>
        <small
          [ngClass]="
            validatePasswordStyle('hasSpecialCharacters')
              ? 'text-danger'
              : 'text-success'
          "
        >
          The password must have at least <strong>a special character</strong>
        </small>
      </div>

      <label for="confirmPassword" class="block text-900 font-medium my-2"
        >Confirm Password*</label
      >
      <input
        id="confirmPassword"
        type="password"
        pInputText
        class="w-full"
        name="confirmPassword"
        ngModel
      />

      <div
        class="flex align-items-center gap-1"
        *ngIf="form.controls['confirmPassword']?.errors"
      >
        <i class="pi pi-times-circle text-danger"></i>
        <small class="text-danger">
          Your comfirmed password must match. Try again!
        </small>
      </div>

      <label for="phoneNumber" class="block text-900 font-medium my-2"
        >Phone number*</label
      >
      <input
        id="phoneNumber"
        type="text"
        pInputText
        class="w-full"
        name="phoneNumber"
        ngModel
      />

      <div
        class="flex align-items-center gap-1"
        *ngIf="form.controls['phoneNumber']?.errors"
      >
        <i class="pi pi-times-circle text-danger"></i>
        <small class="text-danger"> Enter a valid phone number! </small>
      </div>
      <h5>*: The required fill</h5>
      <button
        pButton
        pRipple
        label="Register"
        icon="pi pi-user"
        class="w-full mt-3"
        [disabled]="registerButtonDisabled"
      ></button>
    </div>
    <app-code-validator
      *ngIf="codeValidatorDialogVisible"
      [email]="form.value.email"
    ></app-code-validator>
  </form>
</div>
